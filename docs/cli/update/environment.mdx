---
title: "update environment"
description: "Update an environment configuration"
---

# arcctl update environment

Update environment configuration.

<Note>
Use `arcctl update env` as shorthand for `arcctl update environment`.
</Note>

## Synopsis

```bash
arcctl update environment <name> [config-file] [options]
```

## Arguments

| Argument | Description |
|----------|-------------|
| `<name>` | Environment name |
| `[config-file]` | Optional environment configuration file |

## Options

| Option | Description |
|--------|-------------|
| `-d, --datacenter <name>` | Target datacenter (resolved from flag, `ARCCTL_DATACENTER` env var, or CLI config default) |
| `--var <key=value>` | Override an environment variable (repeatable) |
| `--var-file <path>` | Load variable overrides from a file (KEY=value format) |
| `--auto-approve` | Skip confirmation prompt (when using config file) |
| `--backend <type>` | State backend type |
| `--backend-config <key=value>` | Backend configuration |

## Description

Apply a configuration file to update an environment's components and settings. Components not in the file will be removed, and new components will be deployed.

### Variable Resolution

When the environment file declares a `variables` block, values are resolved automatically from (highest priority first):

1. `--var` CLI flags
2. OS environment variables (auto-mapped from UPPER_SNAKE_CASE of variable name)
3. `.env` file chain from the current working directory
4. Default values from the variable declaration

This means the environment file can be safely checked into version control without hardcoded secrets. See [Environment Variables](/environments/variables) for details.

## Examples

```bash
# Apply configuration file
arcctl update environment staging environment.yml

# Using alias
arcctl update env staging environment.yml

# Specify datacenter explicitly
arcctl update environment staging environment.yml -d my-datacenter

# Override environment variables
arcctl update environment staging environment.yml \
  --var posthog_debug=true

# Load variable overrides from a file
arcctl update environment staging environment.yml \
  --var-file ./secrets.env

# Apply with auto-approval (CI/CD)
arcctl update environment staging ./envs/staging.yml --auto-approve
```

## Output

```
$ arcctl update env staging environment.yml

Environment: staging
Datacenter:  aws-production
Config file: environment.yml

Execution Plan:

  Components to deploy:
    + new-service (ghcr.io/myorg/new-service:v1.0.0)

  Components to update:
    ~ web-app: ghcr.io/myorg/web-app:v1.4.0 -> ghcr.io/myorg/web-app:v1.5.0

  Components to remove:
    - old-service

Plan: 1 to deploy, 1 to update, 1 to remove

Proceed with update? [Y/n]:
```

## See Also

- [`arcctl create environment`](/cli/create/environment) - Create an environment
- [`arcctl destroy environment`](/cli/destroy/environment) - Destroy an environment
